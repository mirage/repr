<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Plugin (ppx_repr.Ppx_repr_lib.Meta_deriving.Plugin)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta3-27-g7dfcb41da"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">ppx_repr</a> &#x00BB; <a href="../../index.html">Ppx_repr_lib</a> &#x00BB; <a href="../index.html">Meta_deriving</a> &#x00BB; Plugin</nav><header class="odoc-preamble"><h1>Module <code><span>Meta_deriving.Plugin</span></code></h1><p>A <code>Plugin.t</code> is a pair of functions that extend a representable type with specialised generic operations: one to supply the implementation of the specialistion, and one to supply its type.</p><p>For instance, the generic operation <code>equal : 'a Repr.t -&gt; 'a -&gt; 'a -&gt; equal</code> could be packaged as the following plugin:</p><pre><code>create
  ~intf:(fun loc t -&gt; [%type: [%t t] -&gt; [%t t] -&gt; bool])
  ~impl:(fun loc t -&gt; [%expr Repr.unstage (Repr.equal [%e t])])</code></pre><p>That is:</p><ul><li>given some type <code>t</code>, its equality function has type <code>t -&gt; t -&gt; bool</code>,</li><li>given a runtime representation of <code>t</code>, we can derive an equality function via <code>Repr.equal</code>.</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>?type_name:<span>[ `before <span>| `after</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
<span>impl:<span>(<span><span class="xref-unresolved">Ppxlib</span>.location <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.expression)</span> <span class="arrow">&#45;&gt;</span></span>
<span>intf:<span>(<span><span class="xref-unresolved">Ppxlib</span>.location <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.core_type)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-derive_str" class="anchored"><a href="#val-derive_str" class="anchor"></a><code><span><span class="keyword">val</span> derive_str : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>loc:<span class="xref-unresolved">Ppxlib</span>.location <span class="arrow">&#45;&gt;</span></span> <span>type_name:string <span class="arrow">&#45;&gt;</span></span> <span>params:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
<span>expr:<span class="xref-unresolved">Ppxlib</span>.expression <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.structure_item</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-derive_sig" class="anchored"><a href="#val-derive_sig" class="anchor"></a><code><span><span class="keyword">val</span> derive_sig : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>loc:<span class="xref-unresolved">Ppxlib</span>.location <span class="arrow">&#45;&gt;</span></span> <span>type_name:string <span class="arrow">&#45;&gt;</span></span> <span>params:<span><span class="xref-unresolved">Ppxlib</span>.core_type list</span> <span class="arrow">&#45;&gt;</span></span>
<span>ctyp:<span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Ppxlib</span>.signature_item</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-defaults" class="anchored"><a href="#val-defaults" class="anchor"></a><code><span><span class="keyword">val</span> defaults : <span><a href="#type-t">t</a> list</span></span></code></div><div class="spec-doc"><p>Default set of plugins, using the generic operations provided by <code>Repr</code>.</p></div></div></div></body></html>